import"./vendor-BJVQQ_N7.js";import"./core-TQBgn5cz.js";import"./features-V3V_xCIk.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),window.DEFAULT_SETTINGS={host:"localhost",port:"8080",requestTimeout:"69000",customHeaders:{},customHeadersRaw:"",cacheEnabled:!0,autoRefreshEnabled:!1,refreshInterval:"0",autoConnect:!0,cacheRebuildDelay:"1000",cacheValidationDelay:"1500",optimisticCacheAgeLimit:"30000",cacheCountDiffThreshold:"2",backgroundFetchDelay:"200"};const e=window.DEFAULT_SETTINGS;window.customHeaders={...e.customHeaders||{}};let t=!1;function n(){if("function"==typeof window.readWiremockSettings)return window.readWiremockSettings();try{const e=localStorage.getItem("wiremock-settings");if(!e)return{};const t=JSON.parse(e);return"function"==typeof window.normalizeWiremockSettings?window.normalizeWiremockSettings(t):t&&"object"==typeof t?t:{}}catch(e){return{}}}function o(e){const t=(e||"").trim();if(!t)return{headers:{},raw:""};try{const e=JSON.parse(t);if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Custom headers must be a JSON object.");return{headers:e,raw:t}}catch(n){const e=t.split(/\n+/),o={};let a=!0;for(const t of e){if(!t.trim())continue;const e=t.indexOf(":");if(-1===e){a=!1;break}const n=t.slice(0,e).trim(),i=t.slice(e+1).trim();if(!n){a=!1;break}o[n]=i}if(a&&Object.keys(o).length>0)return{headers:o,raw:t};throw new Error('Custom headers must be valid JSON or "Key: Value" pairs.')}}function a(e){if(!e)return"";if(e.customHeadersRaw)return e.customHeadersRaw;if(e.customHeaders&&"object"==typeof e.customHeaders&&!Array.isArray(e.customHeaders))try{return JSON.stringify(e.customHeaders,null,2)}catch(t){}return""}function i(e){return Boolean(e&&e.host&&e.port&&!1!==e.autoConnect)}function d(e,n={}){if(!i(e))return;if(t&&!n.force)return;t=!0;const o=()=>{try{const e="function"==typeof window.connectToWireMock?window.connectToWireMock():null;e&&"function"==typeof e.catch&&e.catch(e=>{t=!1})}catch(e){t=!1}};n.immediate?o():setTimeout(o,150)}function c(){document.getElementById("onboarding-overlay");const t=document.getElementById("onboarding-form"),c=document.getElementById("onboarding-host"),r=document.getElementById("onboarding-port"),u=document.getElementById("onboarding-headers"),l=document.getElementById("onboarding-auto-connect"),m=n(),p=Boolean(m.host&&m.port);c&&(c.value=m.host||e.host||""),r&&(r.value=m.port||e.port||""),u&&(u.value=a(m)),l&&(l.checked=!1!==m.autoConnect),p?d(m):function(){const e=document.getElementById("onboarding-overlay");if(!e)return;e.classList.remove("hidden"),requestAnimationFrame(()=>{e.classList.add("visible")}),document.body&&document.body.classList.add("onboarding-active");const t=e.querySelector("#onboarding-host");t&&t.focus()}(),t&&t.addEventListener("submit",t=>{t.preventDefault();const a=c?.value.trim(),m=r?.value.trim();if(!a)return"undefined"!=typeof NotificationManager&&NotificationManager.error("Host is required."),void c?.focus();let p;try{p=o(u?.value??"")}catch(w){return"undefined"!=typeof NotificationManager&&NotificationManager.error(w.message),void u?.focus()}const f={...e,...n(),host:a,port:m||e.port,customHeaders:p.headers,customHeadersRaw:p.raw,autoConnect:l?l.checked:e.autoConnect};localStorage.setItem("wiremock-settings",JSON.stringify(f)),window.customHeaders={...f.customHeaders||{}},loadSettings(),s(),function(){const e=document.getElementById("onboarding-overlay");e&&(e.classList.remove("visible"),setTimeout(()=>{e.classList.add("hidden")},220),document.body&&document.body.classList.remove("onboarding-active"))}(),i(f)?d(f,{immediate:!0,force:!0}):"undefined"!=typeof NotificationManager&&NotificationManager.info("Connection saved. You can connect from the dashboard when you are ready.")},{once:!1})}function r(e){try{localStorage.setItem("wiremock-settings-broadcast",JSON.stringify({timestamp:Date.now(),settings:e}))}catch(t){}}if(window.initializeOnboardingFlow=c,window.attemptAutoConnect=d,window.editMapping=e=>{const t=n(),o=`editor/json-editor.html?mappingId=${e}&mode=edit&settings=${encodeURIComponent(JSON.stringify(t))}`,a=window.open(o,`editor_${e}`,"width=1200,height=800,scrollbars=yes,resizable=yes,status=yes");if(!a)return void NotificationManager.error("Popup blocked. Please allow popups for this site.");NotificationManager.info(`Editor opened for mapping ${e}`);const i=window.LifecycleManager.setInterval(()=>{a.closed&&(window.LifecycleManager.clearInterval(i),"function"==typeof window.updateMappingsCounter&&window.updateMappingsCounter(),"function"==typeof window.updateRequestsCounter&&window.updateRequestsCounter())},1e3);setTimeout(()=>{a.closed||window.LifecycleManager.clearInterval(i)},3e5)},window.updateSwaggerUILink=(e,t)=>{const n=document.getElementById("swagger-ui-link"),o=document.getElementById("swagger-ui-link-hint");if(!n)return;const a=function(e,t){const n=(e??"").toString().trim(),o=(t??"").toString().trim();if(!n&&!o)return null;try{const e="function"==typeof window.normalizeWiremockBaseUrl?window.normalizeWiremockBaseUrl(n,o):`http://${n||"localhost"}:${o||"8080"}/__admin`;return e?`${e.replace(/\/?$/,"")}/swagger-ui/`:null}catch(a){return null}}(e??document.getElementById("default-host")?.value??"",t??document.getElementById("default-port")?.value??"");a?(n.href=a,n.textContent=a,n.classList.remove("is-disabled"),n.removeAttribute("aria-disabled"),o&&(o.textContent="Opens the WireMock Admin Swagger UI in a new tab.")):(n.removeAttribute("href"),n.textContent="Define host and port to enable Swagger UI link",n.classList.add("is-disabled"),n.setAttribute("aria-disabled","true"),o&&(o.textContent="We build this link from your saved connection details."))},window.saveSettings=()=>{try{const a=document.getElementById("cache-enabled"),i=document.getElementById("auto-refresh-enabled"),d=document.getElementById("auto-connect-enabled"),c=document.getElementById("custom-headers");let s;try{s=o(c?.value??"")}catch(t){return"undefined"!=typeof NotificationManager&&NotificationManager.error(t.message),void c?.focus()}const u={...e,...n(),host:document.getElementById("default-host")?.value||e.host,port:document.getElementById("default-port")?.value||e.port,requestTimeout:document.getElementById("request-timeout")?.value||e.requestTimeout,cacheEnabled:a?.checked??e.cacheEnabled,autoRefreshEnabled:i?.checked??e.autoRefreshEnabled,refreshInterval:document.getElementById("refresh-interval")?.value||e.refreshInterval,cacheRebuildDelay:document.getElementById("cache-rebuild-delay")?.value||e.cacheRebuildDelay,cacheValidationDelay:document.getElementById("cache-validation-delay")?.value||e.cacheValidationDelay,optimisticCacheAgeLimit:document.getElementById("optimistic-cache-age-limit")?.value||e.optimisticCacheAgeLimit,cacheCountDiffThreshold:document.getElementById("cache-count-diff-threshold")?.value||e.cacheCountDiffThreshold,backgroundFetchDelay:document.getElementById("background-fetch-delay")?.value||e.backgroundFetchDelay,autoConnect:d?.checked??e.autoConnect,customHeaders:s.headers,customHeadersRaw:s.raw},l=document.getElementById("wiremock-host"),m=document.getElementById("wiremock-port");l&&(l.value=u.host),m&&(m.value=u.port),localStorage.setItem("wiremock-settings",JSON.stringify(u)),"function"==typeof window.normalizeWiremockBaseUrl?window.wiremockBaseUrl=window.normalizeWiremockBaseUrl(u.host,u.port):window.wiremockBaseUrl=`http://${u.host}:${u.port}/__admin`,window.customHeaders={...u.customHeaders||{}},r(u),NotificationManager.success("Settings saved successfully!"),"function"==typeof window.updateSwaggerUILink&&window.updateSwaggerUILink(u.host,u.port)}catch(a){NotificationManager.error("Failed to save settings")}},window.resetSettings=()=>{if(confirm("Reset all settings to defaults?"))try{document.getElementById("default-host")&&(document.getElementById("default-host").value=e.host),document.getElementById("default-port")&&(document.getElementById("default-port").value=e.port),document.getElementById("request-timeout")&&(document.getElementById("request-timeout").value=e.requestTimeout),document.getElementById("cache-enabled")&&(document.getElementById("cache-enabled").checked=e.cacheEnabled),document.getElementById("auto-refresh-enabled")&&(document.getElementById("auto-refresh-enabled").checked=e.autoRefreshEnabled),document.getElementById("refresh-interval")&&(document.getElementById("refresh-interval").value=e.refreshInterval),document.getElementById("custom-headers")&&(document.getElementById("custom-headers").value=e.customHeadersRaw||""),document.getElementById("auto-connect-enabled")&&(document.getElementById("auto-connect-enabled").checked=e.autoConnect),localStorage.setItem("wiremock-settings",JSON.stringify(e)),window.wiremockBaseUrl=`http://${e.host}:${e.port}/__admin`,window.customHeaders={...e.customHeaders||{}},r(e),"function"==typeof window.updateSwaggerUILink&&window.updateSwaggerUILink(e.host,e.port),NotificationManager.success("Settings reset to defaults!")}catch(t){NotificationManager.error("Failed to reset settings")}},window.loadSettings=()=>{try{const o=n();if(document.getElementById("default-host")&&(document.getElementById("default-host").value=o.host||e.host),document.getElementById("default-port")&&(document.getElementById("default-port").value=o.port||e.port),document.getElementById("request-timeout")&&(document.getElementById("request-timeout").value=o.requestTimeout||e.requestTimeout),document.getElementById("cache-enabled")&&(document.getElementById("cache-enabled").checked=void 0!==o.cacheEnabled?o.cacheEnabled:e.cacheEnabled),document.getElementById("auto-refresh-enabled")&&(document.getElementById("auto-refresh-enabled").checked=void 0!==o.autoRefreshEnabled?o.autoRefreshEnabled:e.autoRefreshEnabled),document.getElementById("refresh-interval")&&(document.getElementById("refresh-interval").value=o.refreshInterval||e.refreshInterval),document.getElementById("cache-rebuild-delay")&&(document.getElementById("cache-rebuild-delay").value=o.cacheRebuildDelay||e.cacheRebuildDelay),document.getElementById("cache-validation-delay")&&(document.getElementById("cache-validation-delay").value=o.cacheValidationDelay||e.cacheValidationDelay),document.getElementById("optimistic-cache-age-limit")&&(document.getElementById("optimistic-cache-age-limit").value=o.optimisticCacheAgeLimit||e.optimisticCacheAgeLimit),document.getElementById("cache-count-diff-threshold")&&(document.getElementById("cache-count-diff-threshold").value=o.cacheCountDiffThreshold||e.cacheCountDiffThreshold),document.getElementById("background-fetch-delay")&&(document.getElementById("background-fetch-delay").value=o.backgroundFetchDelay||e.backgroundFetchDelay),document.getElementById("custom-headers")&&(document.getElementById("custom-headers").value=a(o)),document.getElementById("auto-connect-enabled")&&(document.getElementById("auto-connect-enabled").checked=!1!==o.autoConnect),window.customHeaders=o.customHeaders&&"object"==typeof o.customHeaders&&!Array.isArray(o.customHeaders)?{...o.customHeaders}:{...e.customHeaders||{}},"function"==typeof window.updateSwaggerUILink&&window.updateSwaggerUILink(o.host,o.port),"function"==typeof window.updateRecorderLink)try{window.updateRecorderLink(o.host,o.port)}catch(t){}}catch(o){}},window.wiremockBaseUrl||(window.wiremockBaseUrl=`http://${e.host}:${e.port}/__admin`),window.applyDefaultsToForm=()=>{const t=document.getElementById("default-host"),n=document.getElementById("default-port"),o=document.getElementById("request-timeout"),a=document.getElementById("cache-enabled"),i=document.getElementById("auto-refresh-enabled"),d=document.getElementById("refresh-interval"),c=document.getElementById("custom-headers"),r=document.getElementById("auto-connect-enabled");t&&!t.value&&(t.value=e.host),n&&!n.value&&(n.value=e.port),o&&!o.value&&(o.value=e.requestTimeout),a&&(a.checked=e.cacheEnabled),i&&(i.checked=e.autoRefreshEnabled),d&&!d.value&&(d.value=e.refreshInterval),c&&!c.value&&(c.value=e.customHeadersRaw||""),r&&(r.checked=e.autoConnect)},document.addEventListener("DOMContentLoaded",async()=>{await new Promise(e=>requestAnimationFrame(e)),"function"==typeof window.initializeSidebarPreference&&window.initializeSidebarPreference(),applyDefaultsToForm(),loadSettings(),s(),"function"==typeof window.updateSwaggerUILink&&window.updateSwaggerUILink();const e=document.getElementById("default-host"),t=document.getElementById("default-port"),n=()=>{"function"==typeof window.updateSwaggerUILink&&window.updateSwaggerUILink()};e?.addEventListener("input",n),t?.addEventListener("input",n),e?.addEventListener("change",n),t?.addEventListener("change",n),"function"==typeof window.initializeFilterTabs&&window.initializeFilterTabs(),c()}),window.addEventListener("storage",e=>{if("wiremock-settings"===e.key&&e.newValue)try{const t=JSON.parse(e.newValue),n=document.getElementById("wiremock-host"),o=document.getElementById("wiremock-port");n&&t.host&&(n.value=t.host),o&&t.port&&(o.value=t.port),t.host&&t.port&&("function"==typeof window.normalizeWiremockBaseUrl?window.wiremockBaseUrl=window.normalizeWiremockBaseUrl(t.host,t.port):window.wiremockBaseUrl=`http://${t.host}:${t.port}/__admin`),"function"==typeof window.updateSwaggerUILink&&window.updateSwaggerUILink(t.host,t.port),t.customHeaders&&"object"==typeof t.customHeaders&&!Array.isArray(t.customHeaders)?window.customHeaders={...t.customHeaders}:window.customHeaders={}}catch(t){}}),window.addEventListener("message",e=>{e.origin===window.location.origin&&(e.data&&"imock-cache-refresh"===e.data.type&&"function"==typeof window.refreshImockCache&&window.refreshImockCache().catch(e=>{}),e.data&&"imock-optimistic-mapping-update"===e.data.type&&"function"==typeof window.applyOptimisticMappingUpdate&&(window.applyOptimisticMappingUpdate(e.data.mapping),"function"==typeof window.fetchAndRenderMappings&&window.fetchAndRenderMappings(window.allMappings)),e.data&&"imock-optimistic-cache-update"===e.data.type&&"function"==typeof window.updateOptimisticCache&&window.updateOptimisticCache(e.data.mapping,e.data.operation))}),window.addEventListener("storage",e=>{if("imock-cache-refresh-trigger"===e.key&&e.newValue&&"function"==typeof window.refreshImockCache&&window.refreshImockCache().catch(e=>{}),"imock-optimistic-update"===e.key&&e.newValue)try{const t=JSON.parse(e.newValue);t.mapping&&"function"==typeof window.applyOptimisticMappingUpdate&&(window.applyOptimisticMappingUpdate(t.mapping),"function"==typeof window.fetchAndRenderMappings&&window.allMappings&&window.fetchAndRenderMappings(window.allMappings),"function"==typeof window.updateMappingsCounter&&window.updateMappingsCounter())}catch(t){}}),"undefined"!=typeof BroadcastChannel)try{new BroadcastChannel("imock-cache-refresh").addEventListener("message",e=>{e.data&&"cache-refresh"===e.data.type&&"function"==typeof window.refreshImockCache&&window.refreshImockCache().catch(e=>{})});new BroadcastChannel("imock-optimistic-updates").addEventListener("message",e=>{e.data&&"optimistic-mapping-update"===e.data.type&&"function"==typeof window.applyOptimisticMappingUpdate&&(window.applyOptimisticMappingUpdate(e.data.mapping),"function"==typeof window.fetchAndRenderMappings&&window.fetchAndRenderMappings(window.allMappings))})}catch(u){}function s(){try{const e=n(),t=document.getElementById("wiremock-host"),o=document.getElementById("wiremock-port");t&&e.host&&(t.value=e.host),o&&e.port&&(o.value=e.port)}catch(u){}}
