window.SELECTORS={PAGES:{MAPPINGS:"mappings-page",REQUESTS:"requests-page",SCENARIOS:"scenarios-page","IMPORT-EXPORT":"import-export-page",RECORDING:"recording-page",SETTINGS:"settings-page"},REQUEST_FILTERS:{METHOD:"req-filter-method",STATUS:"req-filter-status",URL:"req-filter-url",DATE_FROM:"req-filter-from",DATE_TO:"req-filter-to",QUICK:"req-filter-quick"},MAPPING_FILTERS:{METHOD:"filter-method",URL:"filter-url",STATUS:"filter-status"},LISTS:{MAPPINGS:"mappings-list",REQUESTS:"requests-list",SCENARIOS:"scenarios-list"},EMPTY:{MAPPINGS:"mappings-empty",REQUESTS:"requests-empty"},UI:{STATS:"stats",SEARCH_FILTERS:"search-filters",UPTIME:"uptime",DATA_SOURCE_INDICATOR:"data-source-indicator",REQUESTS_SOURCE_INDICATOR:"requests-source-indicator"},LOADING:{MAPPINGS:"mappings-loading",REQUESTS:"requests-loading"},COUNTERS:{MAPPINGS:"mappings-count",REQUESTS:"requests-count"},CONNECTION:{SETUP:"connection-setup",HOST:"wiremock-host",PORT:"wiremock-port",CONNECT_BTN:"connect-btn",STATUS_DOT:"status-dot",STATUS_TEXT:"status-text",UPTIME:"uptime"},MODAL:{FORM:"mapping-form",ID:"mapping-id",TITLE:"modal-title"},FORM_FIELDS:{METHOD:"mapping-method",URL:"mapping-url",STATUS:"mapping-status",HEADERS:"mapping-headers",BODY:"mapping-body",PRIORITY:"mapping-priority",NAME:"mapping-name"},BUTTONS:{ADD_MAPPING:"add-mapping-btn",START_RECORDING:"start-recording-btn"},RECORDING:{URL:"recording-url",CAPTURE_HEADERS:"capture-headers",CAPTURE_BODY:"capture-body",URL_FILTER:"url-filter",INDICATOR:"recording-indicator",TARGET:"recording-target",COUNT:"recording-count",STOP_BTN:"stop-recording-btn"},SETTINGS:{HOST:"settings-host",PORT:"settings-port",TIMEOUT:"settings-timeout",AUTO_REFRESH:"auto-refresh",THEME:"theme-select",CUSTOM_HEADERS:"custom-headers",CACHE_ENABLED:"cache-enabled"},IMPORT:{FILE:"import-file",DISPLAY:"file-display",ACTIONS:"import-actions",RESULT:"import-result",MODE:"import-mode"},EXPORT:{FORMAT:"export-format",RESULT:"export-result"},STATS:{TOTAL_MAPPINGS:"total-mappings",TOTAL_REQUESTS:"total-requests"},HEALTH:{INDICATOR:"health-indicator"}},function(){const e=new Set,t=new Set,n={setInterval(t,n){const i=window.setInterval(t,n);return e.add(i),i},clearInterval(t){null!=t&&(window.clearInterval(t),e.delete(t))},requestAnimationFrame(e){if("function"!=typeof window.requestAnimationFrame)return e(),null;const n=window.requestAnimationFrame(e);return t.add(n),n},cancelAnimationFrame(e){null!=e&&"function"==typeof window.cancelAnimationFrame&&(window.cancelAnimationFrame(e),t.delete(e))},clearAll(){e.forEach(e=>window.clearInterval(e)),e.clear(),t.forEach(e=>{"function"==typeof window.cancelAnimationFrame&&window.cancelAnimationFrame(e)}),t.clear()}};window.LifecycleManager=n,window.addEventListener("beforeunload",()=>n.clearAll())}(),window.debounce=function(e,t=150,n={}){let i,o,a,s;const{leading:r=!1,trailing:d=!0}=n,c=()=>{i=void 0,d&&o&&(s=e.apply(a,o),o=a=void 0)};return Object.assign(function(...n){return o=n,a=this,void 0===i?(r&&(s=e.apply(a,o),o=a=void 0),i=window.setTimeout(c,t)):(window.clearTimeout(i),i=window.setTimeout(c,t)),s},{cancel(){void 0!==i&&window.clearTimeout(i),i=void 0,o=a=void 0},flush:()=>(void 0!==i&&(window.clearTimeout(i),c()),s)})},function(){const e=new WeakMap;window.renderList=function(t,n,i={}){if(!(t instanceof Element&&Array.isArray(n)))return;const{renderItem:o,getKey:a,getSignature:s,onItemChanged:r,onItemRemoved:d}=i;if("function"!=typeof o)return;const c=new Map;Array.from(t.children).forEach(e=>{e instanceof HTMLElement&&e.dataset&&e.dataset.id&&c.set(e.dataset.id,e)});const u=document.createDocumentFragment();n.forEach(e=>{const t="function"==typeof a?a(e):e&&(e.id||e.uuid);if(!t)return;const n=String(t),i="function"==typeof s?s(e):n,d=c.get(n);if(d&&d.dataset.renderSignature===i)return d.dataset.renderSignature=i,u.appendChild(d),void c.delete(n);const l=d&&d.dataset.renderSignature||null;if(d&&"function"==typeof r&&l!==i)try{r(n,e,i,l)}catch(p){}const m=function(e){if("string"!=typeof e||!e.trim())return null;const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstElementChild}(o(e));m?(m.dataset.id=n,m.dataset.renderSignature=i,u.appendChild(m),c.delete(n)):c.delete(n)}),c.forEach((e,t)=>{if(e.remove(),"function"==typeof d)try{d(String(t),e)}catch(n){}});const l=()=>{t.replaceChildren(u)};if(window.LifecycleManager&&"function"==typeof window.LifecycleManager.requestAnimationFrame){const n=e.get(t);n&&window.LifecycleManager.cancelAnimationFrame(n);const i=window.LifecycleManager.requestAnimationFrame(()=>{l(),e.delete(t)});null!==i&&e.set(t,i)}else if("function"==typeof window.requestAnimationFrame){const n=window.requestAnimationFrame(l);e.set(t,n)}else l()}}(),window.Icons={render(e,t={}){if(!e)return"";const n=["icon",`icon-${e}`];t.className&&n.push(t.className);return`<svg class="${n.join(" ")}" aria-hidden="true" focusable="false"><use href="#icon-${e}"></use></svg>`}},window.ENDPOINTS={HEALTH:"/health",MAPPINGS:"/mappings",MAPPINGS_RESET:"/mappings/reset",MAPPINGS_SAVE:"/mappings/save",MAPPINGS_IMPORT:"/mappings/import",MAPPINGS_FIND_BY_METADATA:"/mappings/find-by-metadata",MAPPINGS_REMOVE_BY_METADATA:"/mappings/remove-by-metadata",MAPPINGS_UNMATCHED:"/mappings/unmatched",REQUESTS:"/requests",REQUESTS_RESET:"/requests/reset",REQUESTS_COUNT:"/requests/count",REQUESTS_REMOVE:"/requests/remove",REQUESTS_FIND:"/requests/find",REQUESTS_UNMATCHED:"/requests/unmatched",REQUESTS_UNMATCHED_NEAR_MISSES:"/requests/unmatched/near-misses",NEAR_MISSES_REQUEST:"/near-misses/request",NEAR_MISSES_PATTERN:"/near-misses/request-pattern",RECORDINGS_START:"/recordings/start",RECORDINGS_STOP:"/recordings/stop",RECORDINGS_STATUS:"/recordings/status",RECORDINGS_SNAPSHOT:"/recordings/snapshot",SCENARIOS:"/scenarios",SCENARIOS_RESET:"/scenarios/reset",SETTINGS:"/settings",SHUTDOWN:"/shutdown"};const e=e=>!e||"object"!=typeof e||Array.isArray(e)?{}:Object.keys(e).reduce((t,n)=>{const i=String(n).trim();return i?(t[i]=e[n],t):t},{}),t=t=>{if(!t||"object"!=typeof t||Array.isArray(t))return{};const n={...t},i=e(n.customHeaders);if("string"==typeof n.authHeader&&n.authHeader.trim()){const e=n.authHeader.trim();if(Object.prototype.hasOwnProperty.call(i,"Authorization")||(i.Authorization=e),delete n.authHeader,!n.customHeadersRaw||"string"!=typeof n.customHeadersRaw||!n.customHeadersRaw.trim())try{n.customHeadersRaw=JSON.stringify(i,null,2)}catch(o){n.customHeadersRaw=""}}return n.customHeaders=i,"string"!=typeof n.customHeadersRaw&&(n.customHeadersRaw=""),void 0===n.autoConnect?n.autoConnect=!0:n.autoConnect=!1!==n.autoConnect,n};window.normalizeWiremockSettings=e=>t(e),window.readWiremockSettings=()=>{try{const e=localStorage.getItem("wiremock-settings");if(!e)return{};const n=JSON.parse(e);return t(n)}catch(e){return{}}},window.getWiremockSettings=window.readWiremockSettings,window.buildScenarioStateEndpoint=e=>{const t="string"==typeof e?e:"";return t.trim()?`${ENDPOINTS.SCENARIOS}/${encodeURIComponent(t)}/state`:""},!window.DEFAULT_SETTINGS?.requestTimeout||parseInt(window.DEFAULT_SETTINGS.requestTimeout),window.customHeaders=e(window.DEFAULT_SETTINGS?.customHeaders||{}),window.startTime=null,window.uptimeInterval=null,window.allMappings=[],window.allRequests=[],window.allScenarios=[],window.isRecording=!1,window.recordedCount=0,window.normalizeWiremockBaseUrl=(e,t)=>{let n=(e||"").trim(),i=(t||"").trim(),o="http",a="";n||(n="localhost");try{const e=new URL(n.includes("://")?n:`http://${n}`);o=e.protocol.replace(":","")||"http",a=e.hostname,!i&&e.port&&(i=e.port)}catch(s){const e=n.match(/^([^:/]+)(?::(\d+))?$/);e?(a=e[1],!i&&e[2]&&(i=e[2])):a=n}return a||(a="localhost"),i||(i="https"===o?"443":"8080"),`${o}://${a}:${i}/__admin`},window.apiFetch=async(t,n={})=>{const i=new AbortController,o="function"==typeof window.readWiremockSettings?window.readWiremockSettings():{},a=window.DEFAULT_SETTINGS?.requestTimeout?parseInt(window.DEFAULT_SETTINGS.requestTimeout):69e3,s=o.requestTimeout?parseInt(o.requestTimeout):a,r=setTimeout(()=>i.abort(),s),d=`${window.wiremockBaseUrl}${t}`,c=(n.method,{"Content-Type":"application/json",...e(o.customHeaders||window.customHeaders),...n.headers});try{const e=await fetch(d,{...n,signal:i.signal,headers:c});if(clearTimeout(r),!e.ok){const t=await e.text();throw new Error(`HTTP ${e.status}: ${t||e.statusText}`)}const o=e.headers.get("content-type");let a;a=o&&o.includes("application/json")?await e.json():await e.text();"object"==typeof a?(JSON.stringify(a).substring(0,500),JSON.stringify(a).length):(a.toString().substring(0,500),a.toString().length);try{t!==(window.ENDPOINTS&&window.ENDPOINTS.HEALTH)&&t!==(window.ENDPOINTS&&window.ENDPOINTS.MAPPINGS)||(window.lastWiremockSuccess=Date.now(),"function"==typeof window.updateLastSuccessUI&&window.updateLastSuccessUI())}catch(u){}return a}catch(l){if(clearTimeout(r),"AbortError"===l.name)throw new Error(`Request timeout after ${s}ms`);throw l}},window.showPage=(e,t)=>{document.querySelectorAll('.main-content > div[id$="-page"]').forEach(e=>e.classList.add("hidden"));const n=document.getElementById(SELECTORS.PAGES[e.toUpperCase()]);n&&(n.classList.remove("hidden"),document.querySelectorAll(".sidebar .nav-item").forEach(e=>e.classList.remove("active")),t&&t.classList.add("active"))};const n="sidebar-collapsed",i="imock-sidebar-state",o=(e,{persist:t=!0}={})=>{const o=document.body;if(o&&(o.classList.toggle(n,e),(e=>{const t=document.querySelector(".sidebar-toggle");if(!t)return;const n=e?"Expand sidebar":"Collapse sidebar";t.setAttribute("aria-expanded",String(!e)),t.setAttribute("aria-label",n),t.setAttribute("title",n);const i=t.querySelector("use");i&&i.setAttribute("href",e?"#icon-sidebar-expand":"#icon-sidebar-collapse")})(e),t))try{localStorage.setItem(i,e?"collapsed":"expanded")}catch(a){}};window.toggleSidebar=()=>{const e=document.body?.classList.contains(n);o(!e)},window.initializeSidebarPreference=()=>{let e=null;try{e=localStorage.getItem(i)}catch(t){}o("collapsed"===e,{persist:!1})};const a=e=>{if(!e)return null;const t=e.endsWith("-modal")?[e,e.replace(/-modal$/,"")]:[`${e}-modal`,e],[n]=t;for(let i=0;i<t.length;i+=1){const e=t[i];if(!e)continue;const n=document.getElementById(e);if(n)return n}return null};window.showModal=e=>{const t=a(e);if(!t)return;t.classList.remove("hidden"),t.style.display="flex";const n=t.querySelector("input, select, textarea");n&&setTimeout(()=>n.focus(),100)},window.openAddMappingModal=()=>{(()=>{const e=document.getElementById(SELECTORS.MODAL.FORM),t=document.getElementById(SELECTORS.MODAL.ID),n=document.getElementById(SELECTORS.MODAL.TITLE);e&&e.reset(),t&&(t.value=""),n&&(n.textContent="Add New Mapping")})(),window.showModal("add-mapping-modal")},window.hideModal=e=>{const t="string"==typeof e?a(e):e;if(!t)return;t.classList.add("hidden"),t.style.display="none";const n=t.querySelector("form");n&&n.reset(),"edit-mapping-modal"===t.id&&"undefined"!=typeof UIComponents&&"function"==typeof UIComponents.clearCardState&&UIComponents.clearCardState("mapping","is-editing")},window.showTab=(e,t)=>{document.querySelectorAll(".tab-content").forEach(e=>{e.classList.add("hidden")}),document.querySelectorAll(".tab-button").forEach(e=>{e.classList.remove("active")}),document.getElementById(`${e}-tab`).classList.remove("hidden"),t.classList.add("active")},window.showMessage=(e,t="info")=>{window.NotificationManager&&NotificationManager.show(e,t)};const s=e=>{const t=document.body;if(!t)return;t.setAttribute("data-theme",e);const n=[document.getElementById("theme-icon"),document.getElementById("editor-theme-icon")].filter(Boolean);if(n.length){const t="dark"===e?"#icon-sun":"#icon-moon";n.forEach(e=>{e.setAttribute("href",t),e.setAttribute("xlink:href",t)})}},r=e=>{localStorage.setItem("theme",e);try{const t="function"==typeof window.readWiremockSettings?window.readWiremockSettings():{};localStorage.setItem("wiremock-settings",JSON.stringify({...t,theme:e}))}catch(t){}};function d(e){return e&&"object"==typeof e?String(e.id||e.uuid||e.stubId||""):""}function c(e){if(!e||"object"!=typeof e)return"";const t=e.request||{},n=e.response||{},i=e.metadata||{},o=e=>{if(null==e)return"";try{const t="string"==typeof e?e:JSON.stringify(e);return t.length>300?`${t.slice(0,300)}…`:t}catch{return""}};return[t.method||"",t.url||t.urlPattern||t.urlPath||t.urlPathPattern||"",n.status||"",n.fixedDelayMilliseconds||"",e.name||i.name||"",e.priority??"",e.scenarioName||"",i.edited||i.created||"",i.source||"",o(t.headers),o(t.bodyPatterns||t.body||""),o(t.queryParameters),o(n.headers),o(void 0!==n.jsonBody?n.jsonBody:n.body||""),o(i.additionalMetadata||i.tags||i.description||"")].join("|")}function u(e){return"function"==typeof window.renderMappingCard?window.renderMappingCard(e):""}function l(e){return e&&"object"==typeof e?String(e.id||e.requestId||e.mappingUuid||e.request?.id||e.request?.loggedDate||e.loggedDate||""):""}function m(e){if(!e||"object"!=typeof e)return"";const t=e.request||{},n=e.responseDefinition||{};return[t.method||"",t.url||t.urlPath||"",t.loggedDate||e.loggedDate||"",!1===e.wasMatched?"unmatched":"matched",n.status??"",(n.body||n.jsonBody||"").length,(t.body||"").length].join("|")}function p(e){return"function"==typeof window.renderRequestCard?window.renderRequestCard(e):""}window.toggleTheme=()=>{const e=document.body;if(!e)return;const t="dark"===(e.getAttribute("data-theme")||"dark")?"light":"dark";s(t),r(t),showMessage(`Switched to ${t} theme`,"success")},window.changeTheme=()=>{const e=document.getElementById("theme-select");if(!e)return;const t=e.value,n=window.matchMedia("(prefers-color-scheme: dark)").matches;s("auto"===t?n?"dark":"light":t),r(t),showMessage(`Theme changed to ${t}`,"success")},window.initializeTheme=()=>{const e=localStorage.getItem("theme")||"dark",t=window.matchMedia("(prefers-color-scheme: dark)").matches;s("auto"===e?t?"dark":"light":e);const n=document.getElementById("theme-select");n&&(n.value=e)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initializeTheme):initializeTheme(),document.addEventListener("click",e=>{e.target.classList.contains("modal")&&hideModal(e.target)}),document.addEventListener("keydown",e=>{if("Escape"===e.key){const e=document.querySelector(".modal:not(.hidden)");e&&hideModal(e)}}),window.debugCustomHeaders=()=>{"function"==typeof window.readWiremockSettings&&window.readWiremockSettings()},window.elementCache=new Map,window.getElement=e=>{if(!window.elementCache.has(e)){const t=document.getElementById(e);return t&&window.elementCache.set(e,t),t}return window.elementCache.get(e)},window.clearElementCache=()=>{window.elementCache.clear()},window.invalidateElementCache=e=>{e?window.elementCache.delete(e):window.elementCache.clear()},window.getElement=(e,t=!1)=>{if(t&&window.invalidateElementCache(e),!window.elementCache.has(e)){const t=document.getElementById(e);return t&&window.elementCache.set(e,t),t}return window.elementCache.get(e)},window.getUserFriendlyErrorMessage=(e,t="operation")=>{const n=e.message||e.toString();return n.includes("Failed to fetch")||n.includes("NetworkError")?"Connection failed. Please check if WireMock server is running and accessible.":n.includes("timeout")||n.includes("Timeout")?"Request timed out. The server may be overloaded or unresponsive.":n.includes("HTTP 404")?"Resource not found. The requested item may have been deleted.":n.includes("HTTP 403")?"Access denied. Please check your authentication settings.":n.includes("HTTP 500")?"Server error. Please try again later or check server logs.":n.includes("HTTP 400")?"Invalid request. Please check your input data.":n.includes("JSON")||n.includes("Unexpected token")?"Data parsing error. The server returned invalid data.":n.includes("CORS")||n.includes("Access-Control")?"Cross-origin request blocked. Please check server CORS settings.":`Failed to ${t}: ${n}`},window.NotificationManager||(window.NotificationManager={TYPES:{INFO:"info",SUCCESS:"success",ERROR:"error",WARNING:"warning"},ICONS:{info:"ℹ️",success:"✅",warning:"⚠️",error:"⛔"},queue:[],visibleToasts:[],dedupeMap:new Map,toastContainer:null,cooldownTimer:null,lastShownAt:0,maxVisible:3,cooldownMs:650,dedupeWindowMs:4e3,defaultDuration:4e3,motionQuery:null,_boundHandleKeydown:null,init(){this.toastContainer||(this.toastContainer=document.getElementById("toast-container"),this.toastContainer||(this.toastContainer=document.createElement("div"),this.toastContainer.id="toast-container",this.toastContainer.setAttribute("aria-live","polite"),this.toastContainer.setAttribute("aria-atomic","false"),document.body.appendChild(this.toastContainer))),!this.motionQuery&&window.matchMedia&&(this.motionQuery=window.matchMedia("(prefers-reduced-motion: reduce)")),this._boundHandleKeydown||(this._boundHandleKeydown=this.handleKeydown.bind(this),document.addEventListener("keydown",this._boundHandleKeydown))},normalizePayload(e,t=this.TYPES.INFO,n=void 0){if(null==e)return null;const i={message:String(e).trim(),type:this.TYPES.INFO,duration:this.defaultDuration,action:null};return"object"==typeof t&&null!==t?Object.assign(i,t):(i.type="string"==typeof t?t:this.TYPES.INFO,"number"==typeof n?i.duration=n:"object"==typeof n&&null!==n&&Object.assign(i,n)),i.message?(Object.values(this.TYPES).includes(i.type)||(i.type=this.TYPES.INFO),i.action&&"object"!=typeof i.action&&(i.action=null),i.action&&"string"!=typeof i.action?.label&&(i.action=null),i.action&&"function"!=typeof i.action?.handler&&(i.action.handler=()=>{}),i.action?i.duration=null:("number"!=typeof i.duration||i.duration<=0)&&(i.duration=this.defaultDuration),i.createdAt=Date.now(),i.count=i.count&&Number.isInteger(i.count)?i.count:1,i.dedupeKey=this.getDedupeKey(i),i):null},show(e,t=this.TYPES.INFO,n=void 0){this.init();const i=this.normalizePayload(e,t,n);if(!i)return;const o=this.dedupeMap.get(i.dedupeKey);if(o&&Date.now()-o.timestamp<=this.dedupeWindowMs)return o.count+=1,o.timestamp=Date.now(),o.payload.count=o.count,this.updateToastCount(o),clearTimeout(o.cleanupTimer),void(o.cleanupTimer=setTimeout(()=>{this.dedupeMap.delete(i.dedupeKey)},this.dedupeWindowMs));this.queue.push(i),this.dedupeMap.set(i.dedupeKey,{count:i.count,timestamp:Date.now(),payload:i,toastEl:null,cleanupTimer:setTimeout(()=>{this.dedupeMap.delete(i.dedupeKey)},this.dedupeWindowMs)}),this.processQueue()},success(e,t){this.show(e,{type:this.TYPES.SUCCESS,..."object"==typeof t?t:{duration:t}})},error(e,t){this.show(e,{type:this.TYPES.ERROR,..."object"==typeof t?t:{duration:t}})},warning(e,t){this.show(e,{type:this.TYPES.WARNING,..."object"==typeof t?t:{duration:t}})},info(e,t){this.show(e,{type:this.TYPES.INFO,..."object"==typeof t?t:{duration:t}})},handleKeydown(e){if("Escape"!==e.key)return;if(!this.visibleToasts.length)return;const t=this.visibleToasts[this.visibleToasts.length-1];t&&this.dismissToast(t.toastEl,t.payload,"escape")},processQueue(){if(!this.queue.length)return;if(this.visibleToasts.length>=this.maxVisible)return;const e=Date.now()-this.lastShownAt;if(e<this.cooldownMs)return void(this.cooldownTimer||(this.cooldownTimer=setTimeout(()=>{this.cooldownTimer=null,this.processQueue()},this.cooldownMs-e)));const t=this.getNextToastIndex();if(-1===t)return;const n=this.queue.splice(t,1)[0];this.displayToast(n)},getNextToastIndex(){if(!this.queue.length)return-1;const e={[this.TYPES.ERROR]:3,[this.TYPES.WARNING]:2,[this.TYPES.INFO]:1,[this.TYPES.SUCCESS]:1};let t=0,n=-1/0,i=1/0;for(let o=0;o<this.queue.length;o+=1){const a=this.queue[o],s=e[a.type]||0;(s>n||s===n&&a.createdAt<i)&&(n=s,i=a.createdAt,t=o)}return t},displayToast(e){const t=document.createElement("div");t.className=`toast toast-${e.type}`,t.setAttribute("role",e.type===this.TYPES.ERROR?"alert":"status"),t.setAttribute("aria-live",e.type===this.TYPES.ERROR?"assertive":"polite"),t.setAttribute("aria-atomic","true"),t.dataset.key=e.dedupeKey;const n=document.createElement("span");n.className="toast-icon",n.setAttribute("aria-hidden","true"),n.textContent=this.ICONS[e.type]||this.ICONS.info;const i=document.createElement("div");i.className="toast-content";const o=document.createElement("p");o.className="toast-message",o.textContent=e.message;const a=document.createElement("span");a.className="toast-count",e.count>1&&(a.textContent=`×${e.count}`,a.setAttribute("aria-label",`${e.count} occurrences`));const s=document.createElement("div");s.className="toast-actions";const r=document.createElement("button");if(r.type="button",r.className="toast-close",r.setAttribute("aria-label","Dismiss notification"),r.textContent="✕",r.addEventListener("click",()=>this.dismissToast(t,e,"close")),e.action){const n=document.createElement("button");n.type="button",n.className="toast-action",n.textContent=e.action.label,n.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();try{e.action.handler()}finally{this.dismissToast(t,e,"action")}}),s.appendChild(n)}s.appendChild(r),i.appendChild(o),e.count>1&&i.appendChild(a),t.appendChild(n),t.appendChild(i),t.appendChild(s),this.toastContainer.firstChild?this.toastContainer.insertBefore(t,this.toastContainer.firstChild):this.toastContainer.appendChild(t);const d=this.dedupeMap.get(e.dedupeKey);d&&(d.toastEl=t,d.payload=e);const c={toastEl:t,payload:e,remaining:e.duration,hideTimer:null,startedAt:null};this.visibleToasts.push(c),this.lastShownAt=Date.now(),requestAnimationFrame(()=>{t.classList.add("show")});const u=()=>{c.hideTimer&&(clearTimeout(c.hideTimer),c.hideTimer=null,c.startedAt&&c.remaining&&(c.remaining-=Date.now()-c.startedAt))},l=()=>{c.hideTimer||null===e.duration||(("number"!=typeof c.remaining||c.remaining<=0)&&(c.remaining=this.defaultDuration),c.startedAt=Date.now(),c.hideTimer=setTimeout(()=>{this.dismissToast(t,e,"timeout")},c.remaining))};t.addEventListener("mouseenter",u),t.addEventListener("focusin",u),t.addEventListener("mouseleave",l),t.addEventListener("focusout",l),null!==e.duration&&(c.remaining=e.duration,l()),this.motionQuery&&this.motionQuery.matches&&t.classList.add("toast-reduced-motion"),this.processQueue()},dismissToast(e,t,n){if(!e||"true"===e.dataset.dismissed)return;e.dataset.dismissed="true",e.classList.remove("show");const i=this.visibleToasts.findIndex(t=>t.toastEl===e);if(-1!==i){const e=this.visibleToasts[i];e.hideTimer&&clearTimeout(e.hideTimer),this.visibleToasts.splice(i,1)}const o=this.dedupeMap.get(t.dedupeKey);o&&o.toastEl===e&&(o.toastEl=null),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),this.processQueue()},this.motionQuery&&this.motionQuery.matches?0:250)},updateToastCount(e){if(e)if(e.toastEl){const t=e.toastEl.querySelector(".toast-count"),n=e.toastEl.querySelector(".toast-content");if(e.count>1){if(t)t.textContent=`×${e.count}`,t.setAttribute("aria-label",`${e.count} occurrences`);else if(n){const t=document.createElement("span");t.className="toast-count",t.textContent=`×${e.count}`,t.setAttribute("aria-label",`${e.count} occurrences`),n.appendChild(t)}}else t&&t.parentNode&&t.parentNode.removeChild(t);const i=this.visibleToasts.find(t=>t.toastEl===e.toastEl);i&&null!==i.payload.duration&&(i.hideTimer&&clearTimeout(i.hideTimer),i.remaining=Math.max(i.payload.duration,this.defaultDuration),i.startedAt=Date.now(),i.hideTimer=setTimeout(()=>{this.dismissToast(i.toastEl,i.payload,"timeout")},i.remaining))}else e.payload&&(e.payload.count=e.count)},getDedupeKey:e=>`${e.type}::${e.message}::${e.action?e.action.label:""}`}),window.TabManager={configs:{mappings:{name:"Mappings",loadFunction:"loadMappings",clearFunction:"clearMappingFilters"},requests:{name:"Requests",loadFunction:"loadRequests",clearFunction:"clearRequestFilters"},scenarios:{name:"Scenarios",loadFunction:"loadScenarios",clearFunction:null}},async refresh(e){const t=this.configs[e];if(t)try{const e=window[t.loadFunction];"function"==typeof e&&await e()}catch(n){NotificationManager.error(`Failed to refresh ${t.name}: ${n.message}`)}},clearFilters(e){const t=this.configs[e];if(t&&t.clearFunction)try{const e=window[t.clearFunction];"function"==typeof e&&e()}catch(n){}}},"undefined"!=typeof window&&(window.renderMappingMarkup=window.renderMappingMarkup||u),"undefined"!=typeof window&&(window.renderRequestMarkup=window.renderRequestMarkup||p),window.FilterManager={saveFilterState(e,t){try{const n=`imock-filters-${e}`;localStorage.setItem(n,JSON.stringify(t))}catch(n){}},loadFilterState(e){try{const t=`imock-filters-${e}`,n=localStorage.getItem(t);return n?JSON.parse(n):{}}catch(t){return{}}},applyMappingFilters(){"function"==typeof this._applyMappingFilters&&this._applyMappingFilters()},flushMappingFilters(){this._applyMappingFilters&&"function"==typeof this._applyMappingFilters.flush&&this._applyMappingFilters.flush()},applyRequestFilters(){"function"==typeof this._applyRequestFilters&&this._applyRequestFilters()},flushRequestFilters(){this._applyRequestFilters&&"function"==typeof this._applyRequestFilters.flush&&this._applyRequestFilters.flush()},restoreFilters(e){const t=this.loadFilterState(e);if("mappings"===e){if(t.method){const e=document.getElementById("filter-method");e&&(e.value=t.method)}if(t.url){const e=document.getElementById("filter-url");e&&(e.value=t.url)}if(t.status){const e=document.getElementById("filter-status");e&&(e.value=t.status)}}else if("requests"===e){if(t.method){const e=document.getElementById("req-filter-method");e&&(e.value=t.method)}if(t.status){const e=document.getElementById("req-filter-status");e&&(e.value=t.status)}if(t.url){const e=document.getElementById("req-filter-url");e&&(e.value=t.url)}if(t.from){const e=document.getElementById("req-filter-from");e&&(e.value=t.from)}if(t.to){const e=document.getElementById("req-filter-to");e&&(e.value=t.to)}}}},window.FilterManager._applyMappingFilters=window.debounce(function(){const e=document.getElementById("filter-method")?.value?.trim()||"",t=document.getElementById("filter-url")?.value?.trim()||"",n=document.getElementById("filter-status")?.value?.trim()||"",i={method:e,url:t,status:n};if(window.FilterManager.saveFilterState("mappings",i),!Array.isArray(window.originalMappings)||0===window.originalMappings.length){window.allMappings=[];const e=document.getElementById(SELECTORS.EMPTY.MAPPINGS),t=document.getElementById(SELECTORS.LISTS.MAPPINGS);return e&&e.classList.remove("hidden"),t&&(t.style.display="none"),void("function"==typeof updateMappingsCounter&&updateMappingsCounter())}const o=e.toLowerCase(),a=t.toLowerCase(),s=Boolean(e||t||n),r=s?window.originalMappings.filter(i=>{if(!i)return!1;if(e){if(!(i.request?.method||"").toLowerCase().includes(o))return!1}if(t){const e=(i.request?.url||i.request?.urlPattern||i.request?.urlPath||"").toLowerCase(),t=(i.name||"").toLowerCase();if(!e.includes(a)&&!t.includes(a))return!1}if(n){if(!(i.response?.status??"").toString().includes(n))return!1}return!0}):window.originalMappings;window.allMappings=s?r:window.originalMappings;const l=document.getElementById(SELECTORS.LISTS.MAPPINGS),m=document.getElementById(SELECTORS.EMPTY.MAPPINGS),p=document.getElementById(SELECTORS.LOADING.MAPPINGS);if(!l)return;const g=[...window.allMappings].sort((e,t)=>{const n=e?.priority??1,i=t?.priority??1;if(n!==i)return n-i;const o={GET:1,POST:2,PUT:3,PATCH:4,DELETE:5},a=o[e?.request?.method]||999,s=o[t?.request?.method]||999;if(a!==s)return a-s;const r=e?.request?.url||e?.request?.urlPattern||e?.request?.urlPath||"",d=t?.request?.url||t?.request?.urlPattern||t?.request?.urlPath||"";return r.localeCompare(d)});renderList(l,g,{renderItem:u,getKey:d,getSignature:c}),p&&p.classList.add("hidden"),0===g.length?(m&&m.classList.remove("hidden"),l.style.display="none"):(m&&m.classList.add("hidden"),l.style.display="block"),"function"==typeof updateMappingsCounter&&updateMappingsCounter()},180),window.FilterManager._applyRequestFilters=window.debounce(function(){const e=document.getElementById("req-filter-method")?.value?.trim()||"",t=document.getElementById("req-filter-status")?.value?.trim()||"",n=document.getElementById("req-filter-url")?.value?.trim()||"",i=document.getElementById("req-filter-from")?.value||"",o=document.getElementById("req-filter-to")?.value||"",a={method:e,status:t,url:n,from:i,to:o};if(window.FilterManager.saveFilterState("requests",a),!Array.isArray(window.originalRequests)||0===window.originalRequests.length){window.allRequests=[];const e=document.getElementById(SELECTORS.EMPTY.REQUESTS),t=document.getElementById(SELECTORS.LISTS.REQUESTS);return e&&e.classList.remove("hidden"),t&&(t.style.display="none"),void("function"==typeof updateRequestsCounter&&updateRequestsCounter())}const s=e.toLowerCase(),r=n.toLowerCase(),d=i?new Date(i).getTime():null,c=o?new Date(o).getTime():null,u=Boolean(e||t||n||null!==d||null!==c),g=u?window.originalRequests.filter(i=>{if(!i)return!1;if(e){if(!(i.request?.method||"").toLowerCase().includes(s))return!1}if(t){if("matched"===t&&!1===i.wasMatched)return!1;if("unmatched"===t&&!1!==i.wasMatched)return!1;if("matched"!==t&&"unmatched"!==t){if(!(i.response?.status??i.responseDefinition?.status??"").toString().includes(t))return!1}}if(n){if(!(i.request?.url||"").toLowerCase().includes(r))return!1}if(d){const e=new Date(i.request?.loggedDate||i.loggedDate).getTime();if(Number.isFinite(d)&&(!Number.isFinite(e)||e<d))return!1}if(c){const e=new Date(i.request?.loggedDate||i.loggedDate).getTime();if(Number.isFinite(c)&&(!Number.isFinite(e)||e>c))return!1}return!0}):window.originalRequests;window.allRequests=u?g:window.originalRequests;const h=document.getElementById(SELECTORS.LISTS.REQUESTS),f=document.getElementById(SELECTORS.EMPTY.REQUESTS),y=document.getElementById(SELECTORS.LOADING.REQUESTS);h&&(renderList(h,window.allRequests,{renderItem:p,getKey:l,getSignature:m}),y&&y.classList.add("hidden"),0===window.allRequests.length?(f&&f.classList.remove("hidden"),h.style.display="none"):(f&&f.classList.add("hidden"),h.style.display="block"),"function"==typeof updateRequestsCounter&&updateRequestsCounter())},180),function(){const e=Date.now(),t=(t=0)=>new Date(e-t).toISOString(),n=[{id:"demo-mapping-products-list",name:"List products",priority:1,request:{method:"GET",urlPath:"/api/products",headers:{Accept:"application/json"}},response:{status:200,headers:{"Content-Type":"application/json"},jsonBody:{items:[{id:"sku-1000",name:"Demo Sneakers",price:129.99},{id:"sku-1001",name:"Demo Backpack",price:89.5}]}},metadata:{created:t(216e5),edited:t(72e5),source:"demo-seed",tags:["catalog","demo"]}},{id:"demo-mapping-create-order",name:"Create order",priority:2,persistent:!0,request:{method:"POST",urlPath:"/api/orders",bodyPatterns:[{matchesJsonPath:"$.items[*].sku"}]},response:{status:201,fixedDelayMilliseconds:120,headers:{"Content-Type":"application/json",Location:"/api/orders/90001"},jsonBody:{orderId:"90001",status:"processing",estimatedDelivery:t(-9e5)}},metadata:{created:t(432e5),edited:t(27e5),scenarioName:"checkout-flow",source:"demo-seed"}},{id:"demo-mapping-update-profile",name:"Update profile",priority:3,request:{method:"PUT",urlPattern:"/api/users/\\d+",headers:{"X-Demo-Auth":"Bearer ***"}},response:{status:204,headers:{"X-Demo-Trace":"profile-update"}},metadata:{created:t(18e5),edited:t(9e5),source:"demo-seed",tags:["profile"]}},{id:"demo-mapping-delete-session",name:"Delete session",priority:4,request:{method:"DELETE",urlPathPattern:"/api/sessions/.*"},response:{status:202,headers:{"Retry-After":"30"},jsonBody:{status:"scheduled"}},metadata:{created:t(108e5),source:"demo-seed"}}],i=[{id:"demo-request-001",wasMatched:!0,request:{method:"GET",url:"/api/products",urlPath:"/api/products",loggedDate:t(48e4),headers:{Accept:["application/json"],Host:["demo.wiremock.local"]},clientIp:"192.168.10.14"},responseDefinition:{status:200,headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:"sku-1000"},{id:"sku-1001"}]})}},{id:"demo-request-002",wasMatched:!1,request:{method:"POST",url:"/api/orders",loggedDate:t(3e5),body:JSON.stringify({items:[]}),headers:{"Content-Type":["application/json"],Host:["demo.wiremock.local"]},clientIp:"192.168.10.18"},responseDefinition:{status:404,body:"No matching mapping found",headers:{"Content-Type":"text/plain"}}},{id:"demo-request-003",wasMatched:!0,request:{method:"PATCH",url:"/api/orders/90001",loggedDate:t(18e4),body:JSON.stringify({status:"cancelled"}),headers:{"Content-Type":["application/json"],"X-Demo-Auth":["Bearer demo-token"]},clientIp:"192.168.10.20"},responseDefinition:{status:409,body:JSON.stringify({message:"Order already fulfilled"}),headers:{"Content-Type":"application/json"}}},{id:"demo-request-004",wasMatched:!0,request:{method:"DELETE",url:"/api/sessions/abc123",loggedDate:t(12e4),headers:{"X-Demo-Auth":["Bearer demo-token"],Host:["demo.wiremock.local"]},clientIp:"192.168.10.22"},responseDefinition:{status:202,body:"Session deletion scheduled",headers:{"Retry-After":"30"}}}],o={generatedAt:t()},a=e=>JSON.parse(JSON.stringify(e));window.DemoData={isAvailable:()=>n.length>0||i.length>0,getMappingsPayload:()=>({mappings:a(n),meta:{...o},__source:"demo"}),getRequestsPayload:()=>({requests:a(i),meta:{...o},__source:"demo"}),getDataset:()=>({mappings:a(n),requests:a(i),meta:{...o},__source:"demo"})}}();const g="json";let h={mode:g,originalMapping:null,currentMapping:null,isDirty:!1};document.addEventListener("DOMContentLoaded",()=>{!function(){const e=document.getElementById("mapping-form");e&&e.addEventListener("submit",S);const t=document.getElementById("edit-mapping-form");t&&t.addEventListener("submit",T)}(),function(){const e=document.getElementById("json-editor"),t=document.getElementById("json-editor-container");if(!e||!t)return;const n=parseInt(window.getComputedStyle(e).minHeight,10);Number.isNaN(n)||(e.dataset.minHeight=n),f&&(f.disconnect(),f=null),"undefined"!=typeof ResizeObserver&&(f=new ResizeObserver(()=>E()),f.observe(t)),w&&window.removeEventListener("resize",w),w=()=>E(),window.addEventListener("resize",w),E(!0)}(),document.addEventListener("click",e=>{e.target.matches('[data-action="validate-json"]')&&function(){const e=document.getElementById("json-editor"),t=document.getElementById("json-validation-result");if(!e||!t)return;const n=e.value;if(n.trim())try{JSON.parse(n),t.innerHTML='<div class="validation-success">✓ JSON is valid</div>'}catch(i){t.innerHTML=`<div class="validation-error">✗ JSON error: ${i.message}</div>`}else t.innerHTML='<div class="validation-warning">JSON is empty</div>'}(),e.target.matches('[data-action="format-json"]')&&function(){const e=document.getElementById("json-editor");if(e)try{const t=JSON.parse(e.value);e.value=JSON.stringify(t,null,2),E(!0),v("JSON formatted","success")}catch(t){v("Formatting failed: "+t.message,"error")}}(),e.target.matches('[data-action="minify-json"]')&&function(){const e=document.getElementById("json-editor");if(e)try{const t=JSON.parse(e.value);e.value=JSON.stringify(t),E(!0),v("JSON minified","success")}catch(t){v("Minification failed: "+t.message,"error")}}()}),document.addEventListener("input",e=>{(e.target.matches(".editor-field")||"json-editor"===e.target.id)&&(h.isDirty=!0,M())});const e=document.getElementById("form-editor-container"),t=document.getElementById("json-editor-container");e&&t&&(e.style.display="none",t.style.display="block")});let f=null,y=null,w=null;function E(e=!1){const t=document.getElementById("json-editor"),n=document.getElementById("json-editor-container");t&&n&&(y&&cancelAnimationFrame(y),y=requestAnimationFrame(()=>{y=null;const i=n.querySelector(".json-editor-toolbar"),o=i?i.offsetHeight:0,a=parseInt(t.dataset.minHeight||"0",10)||320,s=Math.max(n.clientHeight-o,a);t.style.height=`${s}px`,t.style.overflowY="auto",t.style.overflowX="auto",e&&(t.scrollTop=0,t.scrollLeft=0)}))}async function S(e){e.preventDefault(),await I()}async function T(e){e.preventDefault(),await updateMapping()}async function I(){const e=document.getElementById("mapping-form"),t=document.getElementById("mapping-id");if(!e)return void NotificationManager.error("Mapping creation form not found");const n=t?t.value:null,i={name:document.getElementById("mapping-name")?.value||"Unnamed Mapping",request:{method:document.getElementById("method").value,urlPath:document.getElementById("url-pattern").value},response:{status:parseInt(document.getElementById("response-status").value),body:document.getElementById("response-body").value}};try{if(n){!function(){try{const e=(new Date).toISOString();"object"==typeof i&&i&&(i.metadata||(i.metadata={}),i.metadata.created||(i.metadata.created=e),i.metadata.edited=e,i.metadata.source="ui")}catch(e){}}();const e=await apiFetch(`/mappings/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),t=e?.mapping||e;NotificationManager.success("Mapping updated!");try{t&&("function"==typeof updateOptimisticCache?updateOptimisticCache(t,"update"):"function"==typeof window.applyOptimisticMappingUpdate&&window.applyOptimisticMappingUpdate(t))}catch(o){}}else{!function(){try{const e=(new Date).toISOString();"object"==typeof i&&i&&(i.metadata||(i.metadata={}),i.metadata.created=e,i.metadata.edited=e,i.metadata.source="ui")}catch(o){}}();const e=await apiFetch("/mappings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),t=e?.mapping||e;NotificationManager.success("Mapping created!");try{t&&t.id&&("function"==typeof updateOptimisticCache?updateOptimisticCache(t,"create"):"function"==typeof window.applyOptimisticMappingUpdate&&window.applyOptimisticMappingUpdate(t))}catch(o){}}hideModal("add-mapping-modal");(document.getElementById(SELECTORS.MAPPING_FILTERS.METHOD)?.value||document.getElementById(SELECTORS.MAPPING_FILTERS.URL)?.value||document.getElementById(SELECTORS.MAPPING_FILTERS.STATUS)?.value)&&FilterManager.applyMappingFilters()}catch(o){NotificationManager.error(`Save failed: ${o.message}`)}}function M(){const e=document.getElementById("editor-dirty-indicator");e&&(e.style.display=h.isDirty?"inline":"none")}function v(e,t="info"){"undefined"==typeof NotificationManager||("success"===t?NotificationManager.success(e):"error"===t?NotificationManager.error(e):NotificationManager.info(e))}window.setMappingEditorBusyState=(e,t)=>{const n=document.getElementById("update-mapping-btn");n&&function(e,t,n){if(!e)return;const i=e.querySelector(".btn-label");t?(e.classList.add("is-loading"),e.disabled=!0,e.setAttribute("aria-busy","true"),i&&(i.dataset.originalText||(i.dataset.originalText=i.textContent),n&&(i.textContent=n))):(e.classList.remove("is-loading"),e.disabled=!1,e.removeAttribute("aria-busy"),i&&i.dataset.originalText&&(i.textContent=i.dataset.originalText,delete i.dataset.originalText))}(n,e,t)},window.updateMapping=async()=>{try{window.setMappingEditorBusyState(!0,"Updating…"),h.mode===g&&function(){const e=document.getElementById("json-editor");if(!e)return;const t=e.value;if(!t.trim())return;try{const e=JSON.parse(t);h.currentMapping=e}catch(n){throw new Error("Invalid JSON: "+n.message)}}();const t=h.currentMapping,n=t?.id;if(!n)return void NotificationManager.error("Mapping ID not found");!function(){try{const e=(new Date).toISOString();"object"==typeof t&&t&&(t.metadata||(t.metadata={}),t.metadata.created||(t.metadata.created=e),t.metadata.edited=e,t.metadata.source="ui")}catch(e){}}();const i=await apiFetch(`/mappings/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=i?.mapping||i;NotificationManager.success("Mapping updated!");try{o&&updateOptimisticCache(o,"update")}catch(e){}h.isDirty=!1,M(),hideModal("edit-mapping-modal");(document.getElementById(SELECTORS.MAPPING_FILTERS.METHOD)?.value||document.getElementById(SELECTORS.MAPPING_FILTERS.URL)?.value||document.getElementById(SELECTORS.MAPPING_FILTERS.STATUS)?.value)&&FilterManager.applyMappingFilters()}catch(e){NotificationManager.error(`Update failed: ${e.message}`)}finally{window.setMappingEditorBusyState(!1)}},window.populateEditMappingForm=e=>{h.originalMapping=e,h.currentMapping=JSON.parse(JSON.stringify(e)),h.isDirty=!1,M(),function(e){const t=document.getElementById("edit-mapping-id"),n=document.getElementById("edit-method"),i=document.getElementById("edit-url-pattern"),o=document.getElementById("edit-response-status"),a=document.getElementById("edit-response-delay"),s=document.getElementById("edit-request-headers"),r=document.getElementById("edit-request-body"),d=document.getElementById("edit-response-headers"),c=document.getElementById("edit-response-body"),u=document.getElementById("edit-mapping-priority"),l=document.getElementById("edit-mapping-scenario"),m=document.getElementById("edit-required-scenario-state"),p=document.getElementById("edit-new-scenario-state"),g=document.getElementById("edit-mapping-name");t&&(t.value="");n&&(n.value="GET");i&&(i.value="");o&&(o.value="200");a&&(a.value="0");s&&(s.value="");r&&(r.value="");d&&(d.value="");c&&(c.value="");u&&(u.value="1");l&&(l.value="");m&&(m.value="");p&&(p.value="");g&&(g.value="");t&&(t.value=e.id||"");n&&(n.value=e.request?.method||"GET");i&&(i.value=e.request?.urlPattern||e.request?.urlPath||"");if(s&&e.request?.headers){const t=JSON.stringify(e.request.headers,null,2);s.value=t.length>5e3?t.substring(0,5e3)+"\n// ... (truncated for performance - switch to JSON mode for full view)":t}if(r&&e.request?.bodyPatterns){const t=JSON.stringify(e.request.bodyPatterns,null,2);r.value=t.length>5e3?t.substring(0,5e3)+"\n// ... (truncated for performance - switch to JSON mode for full view)":t}else if(r&&e.request?.body){const t=e.request.body;r.value="string"==typeof t&&t.length>5e3?t.substring(0,5e3)+"\n// ... (truncated for performance - switch to JSON mode for full view)":t}o&&(o.value=e.response?.status||200);a&&(a.value=e.response?.fixedDelayMilliseconds||0);if(d&&e.response?.headers){const t=JSON.stringify(e.response.headers,null,2);d.value=t.length>5e3?t.substring(0,5e3)+"\n// ... (truncated for performance - switch to JSON mode for full view)":t}if(c)if(e.response?.body){const t=e.response.body;c.value="string"==typeof t&&t.length>5e3?t.substring(0,5e3)+"\n// ... (truncated for performance - switch to JSON mode for full view)":t}else if(e.response?.jsonBody){const t=JSON.stringify(e.response.jsonBody,null,2);c.value=t.length>5e3?t.substring(0,5e3)+"\n// ... (truncated for performance - switch to JSON mode for full view)":t}u&&(u.value=e.priority||1);l&&(l.value=e.scenarioName||"");if(m){const t=e.requiredScenarioState||e.requiredState||"";m.value=t}if(p){const t=e.newScenarioState||e.newState||"";p.value=t}g&&(g.value=e.name||e.metadata?.name||"")}(e),function(){const e=document.getElementById("json-editor");if(!e)return;if(!h.currentMapping)return;const t=JSON.stringify(h.currentMapping,null,2);e.value=t,E(!0)}()},window.saveMappingWrapper=()=>{I().catch(e=>{NotificationManager.error("Save failed: "+e.message)})};
